<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ClusterId::V1::Generator
  
    &mdash; Documentation by YARD 0.9.27
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ClusterId::V1::Generator";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../ClusterId.html" title="ClusterId (module)">ClusterId</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../V1.html" title="ClusterId::V1 (module)">V1</a></span></span>
     &raquo; 
    <span class="title">Generator</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ClusterId::V1::Generator
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ClusterId::V1::Generator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/clusterid/v1/generator.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Create instances of <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> objects based on time, random data, and serializable values for data centre, environment, and type IDs.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>1.0.0</p>
</div>
      
    </li>
  
</ul>

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_byte_string-instance_method" title="#from_byte_string (instance method)">#<strong>from_byte_string</strong>(s)  &#x21d2; Value </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> represented by <code>s</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate-instance_method" title="#generate (instance method)">#<strong>generate</strong>(data_centre: nil, environment: nil, type_id: nil)  &#x21d2; Value </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generate a <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> for a given data centre, environment, and type ID.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(serializer: NullSerializer.new, deserializer: NullDeserializer.new, byte_generator: SecureRandom, clock: Clock)  &#x21d2; Generator </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Generator.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(serializer: NullSerializer.new, deserializer: NullDeserializer.new, byte_generator: SecureRandom, clock: Clock)  &#x21d2; <tt><span class='object_link'><a href="" title="ClusterId::V1::Generator (class)">Generator</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>It is the callerâ€™s responsibility to ensure the serializer and deserializer follow the expected bit lengths for custom types. No overflow checks are done. Overflow will either be discarded or overwrite other bits. See the <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> class for allowed bit lengths.</p>
</div>
  </div>


<p>Returns a new instance of Generator.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>serializer</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Serializer.html" title="ClusterId::V1::Serializer (class)">Serializer</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>NullSerializer.new</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>an object which serializes <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> attributes</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>deserializer</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Deserializer.html" title="ClusterId::V1::Deserializer (class)">Deserializer</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>NullDeserializer.new</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>an object which deserializes <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> attributes</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>byte_generator</span>
      
      
        <span class='type'>(<tt>#bytes(n)</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>SecureRandom</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>an object which provides random bytes</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>clock</span>
      
      
        <span class='type'>(<tt>#now_ms</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Clock</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>an object which provides millisecond timestamps</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>1.0.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/clusterid/v1/generator.rb', line 19</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>serializer:</span> <span class='const'><span class='object_link'><a href="NullSerializer.html" title="ClusterId::V1::NullSerializer (class)">NullSerializer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='label'>deserializer:</span> <span class='const'><span class='object_link'><a href="NullDeserializer.html" title="ClusterId::V1::NullDeserializer (class)">NullDeserializer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='label'>byte_generator:</span> <span class='const'>SecureRandom</span><span class='comma'>,</span> <span class='label'>clock:</span> <span class='const'><span class='object_link'><a href="Clock.html" title="ClusterId::V1::Clock (class)">Clock</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@serializer</span> <span class='op'>=</span> <span class='id identifier rubyid_serializer'>serializer</span>
  <span class='ivar'>@deserializer</span> <span class='op'>=</span> <span class='id identifier rubyid_deserializer'>deserializer</span>
  <span class='ivar'>@byte_generator</span> <span class='op'>=</span> <span class='id identifier rubyid_byte_generator'>byte_generator</span>
  <span class='ivar'>@clock</span> <span class='op'>=</span> <span class='id identifier rubyid_clock'>clock</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="from_byte_string-instance_method">
  
    #<strong>from_byte_string</strong>(s)  &#x21d2; <tt><span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> represented by <code>s</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> represented by <code>s</code></p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>1.0.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/clusterid/v1/generator.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_from_byte_string'>from_byte_string</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Value.html#initialize-instance_method" title="ClusterId::V1::Value#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='ivar'>@deserializer</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate-instance_method">
  
    #<strong>generate</strong>(data_centre: nil, environment: nil, type_id: nil)  &#x21d2; <tt><span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generate a <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> for a given data centre, environment, and type ID.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data_centre</span>
      
      
        <span class='type'>(<tt>D</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a serializable value representing the data centre the <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> is generated within</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>environment</span>
      
      
        <span class='type'>(<tt>E</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a serializable value representing the environment the <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span> is generated within</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type_id</span>
      
      
        <span class='type'>(<tt>T</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a serializable value representing the type of entity for a generated <span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a time-based, partially random value to identify an entity</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>1.0.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/clusterid/v1/generator.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='label'>data_centre:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>environment:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>type_id:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raw_data'>raw_data</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='comment'># Nonce
</span>  <span class='id identifier rubyid_raw_data'>raw_data</span> <span class='op'>+=</span> <span class='ivar'>@byte_generator</span><span class='period'>.</span><span class='id identifier rubyid_bytes'>bytes</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span>
  <span class='comment'># Type ID
</span>  <span class='id identifier rubyid_raw_data'>raw_data</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='ivar'>@serializer</span><span class='period'>.</span><span class='id identifier rubyid_from_type_id'>from_type_id</span><span class='lparen'>(</span><span class='id identifier rubyid_type_id'>type_id</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>S</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># Details (Version, Data Centre, Environment)
</span>  <span class='id identifier rubyid_raw_data'>raw_data</span> <span class='op'>+=</span> <span class='lbracket'>[</span>
    <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../V1.html#FORMAT_VERSION-constant" title="ClusterId::V1::FORMAT_VERSION (constant)">FORMAT_VERSION</a></span></span> <span class='op'>&lt;&lt;</span> <span class='int'>5</span><span class='rparen'>)</span> <span class='op'>+</span>
      <span class='lparen'>(</span><span class='ivar'>@serializer</span><span class='period'>.</span><span class='id identifier rubyid_from_data_centre'>from_data_centre</span><span class='lparen'>(</span><span class='id identifier rubyid_data_centre'>data_centre</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='op'>+</span>
      <span class='ivar'>@serializer</span><span class='period'>.</span><span class='id identifier rubyid_from_environment'>from_environment</span><span class='lparen'>(</span><span class='id identifier rubyid_environment'>environment</span><span class='rparen'>)</span>
  <span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># Timestamp
</span>  <span class='id identifier rubyid_raw_data'>raw_data</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='ivar'>@clock</span><span class='period'>.</span><span class='id identifier rubyid_now_ms'>now_ms</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Q</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='const'><span class='object_link'><a href="Value.html" title="ClusterId::V1::Value (class)">Value</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Value.html#initialize-instance_method" title="ClusterId::V1::Value#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_raw_data'>raw_data</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span><span class='comma'>,</span> <span class='ivar'>@deserializer</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Feb 26 19:43:22 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.27 (ruby-3.1.0).
</div>

    </div>
  </body>
</html>